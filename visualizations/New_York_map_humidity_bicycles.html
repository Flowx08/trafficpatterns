<!DOCTYPE html>
<head>    
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    
        <script>
            L_NO_TOUCH = false;
            L_DISABLE_3D = false;
        </script>
    
    <style>html, body {width: 100%;height: 100%;margin: 0;padding: 0;}</style>
    <style>#map {position:absolute;top:0;bottom:0;right:0;left:0;}</style>
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.6.0/dist/leaflet.js"></script>
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.6.0/dist/leaflet.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css"/>
    
            <meta name="viewport" content="width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
            <style>
                #map_df3c5569c4e4430c9df2a3da99c1fedb {
                    position: relative;
                    width: 100.0%;
                    height: 100.0%;
                    left: 0.0%;
                    top: 0.0%;
                }
            </style>
        
    <script src="https://cdn.jsdelivr.net/npm/iso8601-js-period@0.2.1/iso8601.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/leaflet-timedimension@1.1.1/dist/leaflet.timedimension.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/pa7_hm.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/pa7_leaflet_hm.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet-timedimension@1.1.1/dist/leaflet.timedimension.control.css"/>
    
            <script>
                var TDHeatmap = L.TimeDimension.Layer.extend({

            initialize: function(data, options) {
                var heatmapCfg = {
                    radius: 15,
                    maxOpacity: 1.,
                    scaleRadius: false,
                    useLocalExtrema: false,
                    latField: 'lat',
                    lngField: 'lng',
                    valueField: 'count',
                    defaultWeight : 1,
                };
                heatmapCfg = $.extend({}, heatmapCfg, options.heatmapOptions || {});
                var layer = new HeatmapOverlay(heatmapCfg);
                L.TimeDimension.Layer.prototype.initialize.call(this, layer, options);
                this._currentLoadedTime = 0;
                this._currentTimeData = {
                    data: []
                    };
                this.data= data;
                this.defaultWeight = heatmapCfg.defaultWeight || 1;
            },
            onAdd: function(map) {
                L.TimeDimension.Layer.prototype.onAdd.call(this, map);
                map.addLayer(this._baseLayer);
                if (this._timeDimension) {
                    this._getDataForTime(this._timeDimension.getCurrentTime());
                }
            },
            _onNewTimeLoading: function(ev) {
                this._getDataForTime(ev.time);
                return;
            },
            isReady: function(time) {
                return (this._currentLoadedTime == time);
            },
            _update: function() {
                this._baseLayer.setData(this._currentTimeData);
                return true;
            },
            _getDataForTime: function(time) {
                    delete this._currentTimeData.data;
                    this._currentTimeData.data = [];
                    var data = this.data[time-1];
                    for (var i = 0; i < data.length; i++) {
                        this._currentTimeData.data.push({
                                lat: data[i][0],
                                lng: data[i][1],
                                count: data[i].length>2 ? data[i][2] : this.defaultWeight
                            });
                        }
                    this._currentLoadedTime = time;
                    if (this._timeDimension && time == this._timeDimension.getCurrentTime() && !this._timeDimension.isLoading()) {
                        this._update();
                    }
                    this.fire('timeload', {
                        time: time
                    });
                }
        });

        L.Control.TimeDimensionCustom = L.Control.TimeDimension.extend({
            initialize: function(index, options) {
                var playerOptions = {
                    buffer: 1,
                    minBufferReady: -1
                    };
                options.playerOptions = $.extend({}, playerOptions, options.playerOptions || {});
                L.Control.TimeDimension.prototype.initialize.call(this, options);
                this.index = index;
                },
            _getDisplayDateFormat: function(date){
                return this.index[date.getTime()-1];
                }
            });
            </script>
                
</head>
<body>    
    
            <div class="folium-map" id="map_df3c5569c4e4430c9df2a3da99c1fedb" ></div>
        
</body>
<script>    
    
            var map_df3c5569c4e4430c9df2a3da99c1fedb = L.map(
                "map_df3c5569c4e4430c9df2a3da99c1fedb",
                {
                    center: [40.7228, -73.986],
                    crs: L.CRS.EPSG3857,
                    zoom: 13,
                    zoomControl: true,
                    preferCanvas: false,
                }
            );

            

        
    
            var tile_layer_8b6d05fec5d44d40b51218c84602a224 = L.tileLayer(
                "https://stamen-tiles-{s}.a.ssl.fastly.net/toner/{z}/{x}/{y}.png",
                {"attribution": "Map tiles by \u003ca href=\"http://stamen.com\"\u003eStamen Design\u003c/a\u003e, under \u003ca href=\"http://creativecommons.org/licenses/by/3.0\"\u003eCC BY 3.0\u003c/a\u003e. Data by \u0026copy; \u003ca href=\"http://openstreetmap.org\"\u003eOpenStreetMap\u003c/a\u003e, under \u003ca href=\"http://www.openstreetmap.org/copyright\"\u003eODbL\u003c/a\u003e.", "detectRetina": false, "maxNativeZoom": 18, "maxZoom": 18, "minZoom": 0, "noWrap": false, "opacity": 1, "subdomains": "abc", "tms": false}
            ).addTo(map_df3c5569c4e4430c9df2a3da99c1fedb);
        
    

            var times = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21];

            map_df3c5569c4e4430c9df2a3da99c1fedb.timeDimension = L.timeDimension(
                {times : times, currentTime: new Date(1)}
            );

            var heat_map_cdd51d1103584e879112ce7c45bba5a6Control = new L.Control.TimeDimensionCustom(['Humidity from 11.0 to 15.4', 'Humidity from 15.4 to 19.9', 'Humidity from 19.9 to 24.4', 'Humidity from 24.4 to 28.8', 'Humidity from 28.8 to 33.2', 'Humidity from 33.2 to 37.7', 'Humidity from 37.7 to 42.2', 'Humidity from 42.2 to 46.6', 'Humidity from 46.6 to 51.1', 'Humidity from 51.1 to 55.5', 'Humidity from 55.5 to 60.0', 'Humidity from 60.0 to 64.4', 'Humidity from 64.4 to 68.8', 'Humidity from 68.8 to 73.3', 'Humidity from 73.3 to 77.8', 'Humidity from 77.8 to 82.2', 'Humidity from 82.2 to 86.7', 'Humidity from 86.7 to 91.1', 'Humidity from 91.1 to 95.5', 'Humidity from 95.5 to 100.0', 'Humidity from 100.0 to 104.5'], {
                autoPlay: false,
                backwardButton: true,
                displayDate: true,
                forwardButton: true,
                limitMinimumRange: 5,
                limitSliders: true,
                loopButton: true,
                maxSpeed: 10,
                minSpeed: 1,
                playButton: true,
                playReverseButton: true,
                position: "bottomleft",
                speedSlider: true,
                speedStep: 0.1,
                styleNS: "leaflet-control-timecontrol",
                timeSlider: true,
                timeSliderDrapUpdate: false,
                timeSteps: 1
                })
                .addTo(map_df3c5569c4e4430c9df2a3da99c1fedb);

                var heat_map_cdd51d1103584e879112ce7c45bba5a6 = new TDHeatmap([[['0.0', '0.0', '0.0'], ['40.699768', '-73.98582', '0.8228404099560761'], ['40.69981', '-73.98589', '0.43562139350615803'], ['40.709274', '-74.00099', '0.3792093704245974'], ['40.71053', '-73.96145', '1.0'], ['40.711644', '-74.004109', '0.3792093704245974'], ['40.714573', '-73.99495', '0.024890190336749635'], ['40.7156', '-73.99475', '0.5696587453542066'], ['40.73883', '-73.977165', '0.0'], ['40.751038', '-73.94082', '0.6178623718887262']], [['0.0', '0.0', '0.0'], ['40.699768', '-73.98582', '0.8083505831271773'], ['40.69981', '-73.98589', '0.20563304307621175'], ['40.709274', '-74.00099', '0.32352198717625086'], ['40.71053', '-73.96145', '0.9723835007825516'], ['40.711282', '-73.968386', '0.5468521229868228'], ['40.711644', '-74.004109', '0.32352198717625086'], ['40.714573', '-73.99495', '0.026808703993537637'], ['40.7156', '-73.99475', '0.32112557411901566'], ['40.73883', '-73.977165', '0.0'], ['40.751038', '-73.94082', '0.4839198263240269']], [['0.0', '0.0', '0.0'], ['40.699768', '-73.98582', '0.7189303246921024'], ['40.69981', '-73.98589', '0.2921549526637229'], ['40.709274', '-74.00099', '0.3215485315648954'], ['40.71053', '-73.96145', '0.876539488416157'], ['40.711282', '-73.968386', '0.37950219619326503'], ['40.711644', '-74.004109', '0.3215485315648954'], ['40.714573', '-73.99495', '0.019378175867711653'], ['40.7156', '-73.99475', '0.4029169951571123'], ['40.73883', '-73.977165', '0.0'], ['40.751038', '-73.94082', '0.4804495736801309']], [['0.0', '0.0', '0.0'], ['40.699768', '-73.98582', '0.562298682284041'], ['40.69981', '-73.98589', '0.2583540955422693'], ['40.709274', '-74.00099', '0.270497803806735'], ['40.71053', '-73.96145', '0.6824304538799415'], ['40.711282', '-73.968386', '0.3048316251830161'], ['40.711644', '-74.004109', '0.270497803806735'], ['40.714573', '-73.99495', '0.0191800878477306'], ['40.7156', '-73.99475', '0.3346072345740227'], ['40.73883', '-73.977165', '0.0'], ['40.751038', '-73.94082', '0.4164714494875549']], [['0.0', '0.0', '0.0'], ['40.699768', '-73.98582', '0.5624317481374825'], ['40.69981', '-73.98589', '0.29343081875747656'], ['40.709274', '-74.00099', '0.23995534811483302'], ['40.71053', '-73.96145', '0.7236517476521359'], ['40.711282', '-73.968386', '0.32798095023570867'], ['40.711644', '-74.004109', '0.23995534811483302'], ['40.714573', '-73.99495', '0.020129749318492516'], ['40.7156', '-73.99475', '0.34673347806331095'], ['40.73883', '-73.977165', '0.0'], ['40.751038', '-73.94082', '0.4281484836963996']], [['0.0', '0.0', '0.0'], ['40.699768', '-73.98582', '0.653298385362807'], ['40.69981', '-73.98589', '0.3503621093072785'], ['40.709274', '-74.00099', '0.2632053159139543'], ['40.71053', '-73.96145', '0.813420839775159'], ['40.711282', '-73.968386', '0.4792125304149067'], ['40.711644', '-74.004109', '0.2632053159139543'], ['40.714573', '-73.99495', '0.021439760824826713'], ['40.7156', '-73.99475', '0.4095782364331932'], ['40.73883', '-73.977165', '0.0'], ['40.751038', '-73.94082', '0.4833468142399328']], [['0.0', '0.0', '0.0'], ['40.699768', '-73.98582', '0.5788582570621665'], ['40.69981', '-73.98589', '0.26951997490064844'], ['40.709274', '-74.00099', '0.25068228404099563'], ['40.71053', '-73.96145', '0.7308847917953273'], ['40.711282', '-73.968386', '0.38710493434417'], ['40.711644', '-74.004109', '0.25068228404099563'], ['40.714573', '-73.99495', '0.019401441924045713'], ['40.7156', '-73.99475', '0.32604826076006643'], ['40.73883', '-73.977165', '0.0'], ['40.751038', '-73.94082', '0.4501051258387515']], [['0.0', '0.0', '0.0'], ['40.699768', '-73.98582', '0.5163826775560236'], ['40.69981', '-73.98589', '0.2828722024681029'], ['40.709274', '-74.00099', '0.2271161624934859'], ['40.71053', '-73.96145', '0.6537578496276444'], ['40.711282', '-73.968386', '0.38304881467867047'], ['40.711644', '-74.004109', '0.2271161624934859'], ['40.714573', '-73.99495', '0.017664398320872837'], ['40.7156', '-73.99475', '0.32548009943776507'], ['40.73883', '-73.977165', '0.0'], ['40.751038', '-73.94082', '0.4158247520466187']], [['0.0', '0.0', '0.0'], ['40.699768', '-73.98582', '0.44386135193380166'], ['40.69981', '-73.98589', '0.22898613288450848'], ['40.709274', '-74.00099', '0.1995101613620054'], ['40.71053', '-73.96145', '0.5607284452267755'], ['40.711282', '-73.968386', '0.293458905464762'], ['40.711644', '-74.004109', '0.1995101613620054'], ['40.714573', '-73.99495', '0.015083289593635184'], ['40.7156', '-73.99475', '0.26977746126251256'], ['40.73883', '-73.977165', '0.0'], ['40.751038', '-73.94082', '0.36604326086355976']], [['0.0', '0.0', '0.0'], ['40.699768', '-73.98582', '0.42106731534107283'], ['40.69981', '-73.98589', '0.2280692937222797'], ['40.709274', '-74.00099', '0.20719262491079116'], ['40.71053', '-73.96145', '0.5259450548183673'], ['40.711282', '-73.968386', '0.26972965170230756'], ['40.711644', '-74.004109', '0.20719262491079116'], ['40.714573', '-73.99495', '0.013904605308737203'], ['40.7156', '-73.99475', '0.2611412549402387'], ['40.73883', '-73.977165', '0.0'], ['40.751038', '-73.94082', '0.3543284174937994']], [['0.0', '0.0', '0.0'], ['40.699768', '-73.98582', '0.38018216429352697'], ['40.69981', '-73.98589', '0.1992969792356516'], ['40.709274', '-74.00099', '0.16550788406552552'], ['40.71053', '-73.96145', '0.4790886353479714'], ['40.711282', '-73.968386', '0.26683748169838944'], ['40.711644', '-74.004109', '0.16550788406552552'], ['40.714573', '-73.99495', '0.011932773524205038'], ['40.7156', '-73.99475', '0.2297797910914147'], ['40.73883', '-73.977165', '0.0'], ['40.751038', '-73.94082', '0.333206590308109']], [['0.0', '0.0', '0.0'], ['40.699768', '-73.98582', '0.3704479700028882'], ['40.69981', '-73.98589', '0.22078613520114918'], ['40.709274', '-74.00099', '0.1762776473442089'], ['40.71053', '-73.96145', '0.4643108160222775'], ['40.711282', '-73.968386', '0.2440519765739385'], ['40.711644', '-74.004109', '0.17669586240315127'], ['40.714573', '-73.99495', '0.011251729878256685'], ['40.7156', '-73.99475', '0.2460834553440703'], ['40.73883', '-73.977165', '0.0'], ['40.751038', '-73.94082', '0.3351300667883431']], [['0.0', '0.0', '0.0'], ['40.699768', '-73.98582', '0.48088131110376425'], ['40.69981', '-73.98589', '0.26145759819669884'], ['40.709274', '-74.00099', '0.22745871835397014'], ['40.71053', '-73.96145', '0.5678505643980541'], ['40.711282', '-73.968386', '0.270852397510981'], ['40.711644', '-74.004109', '0.22935737209649076'], ['40.714573', '-73.99495', '0.01151938789968356'], ['40.7156', '-73.99475', '0.2975453167312352'], ['40.73883', '-73.977165', '0.0'], ['40.751038', '-73.94082', '0.39312567893071365']], [['0.0', '0.0', '0.0'], ['40.699768', '-73.98582', '0.44359349776626494'], ['40.69981', '-73.98589', '0.23568803166450852'], ['40.709274', '-74.00099', '0.2118127705281733'], ['40.71053', '-73.96145', '0.5342944025228066'], ['40.711282', '-73.968386', '0.24711292093704249'], ['40.711644', '-74.004109', '0.2124312019749709'], ['40.714573', '-73.99495', '0.01142897721932483'], ['40.7156', '-73.99475', '0.2686031556881224'], ['40.73883', '-73.977165', '0.0'], ['40.751038', '-73.94082', '0.3842805613398972']], [['0.0', '0.0', '0.0'], ['40.699768', '-73.98582', '0.4412997728765963'], ['40.69981', '-73.98589', '0.22809153272903746'], ['40.709274', '-74.00099', '0.19378543226495876'], ['40.71053', '-73.96145', '0.5273565303815073'], ['40.711282', '-73.968386', '0.2265898529505379'], ['40.711644', '-74.004109', '0.1942457302038304'], ['40.714573', '-73.99495', '0.011696240278318804'], ['40.7156', '-73.99475', '0.2583794989485877'], ['40.73883', '-73.977165', '0.0'], ['40.751038', '-73.94082', '0.3637621395086437']], [['0.0', '0.0', '0.0'], ['40.699768', '-73.98582', '0.42133284762551926'], ['40.69981', '-73.98589', '0.2340839811057002'], ['40.709274', '-74.00099', '0.1857647304895604'], ['40.71053', '-73.96145', '0.5020771014452143'], ['40.711282', '-73.968386', '0.23597395719759512'], ['40.711644', '-74.004109', '0.1857647304895604'], ['40.714573', '-73.99495', '0.009297803806734993'], ['40.7156', '-73.99475', '0.26512261441376184'], ['40.73883', '-73.977165', '0.0'], ['40.751038', '-73.94082', '0.35572005856515376']], [['0.0', '0.0', '0.0'], ['40.699768', '-73.98582', '0.3498168952669288'], ['40.69981', '-73.98589', '0.18173333392311333'], ['40.709274', '-74.00099', '0.16027587269785007'], ['40.71053', '-73.96145', '0.4249235143346368'], ['40.711282', '-73.968386', '0.22591784303433796'], ['40.711644', '-74.004109', '0.16027587269785007'], ['40.714573', '-73.99495', '0.010298653854354717'], ['40.7156', '-73.99475', '0.20997236197352437'], ['40.73883', '-73.977165', '0.0'], ['40.751038', '-73.94082', '0.2990447625410454']], [['0.0', '0.0', '0.0'], ['40.699768', '-73.98582', '0.3679797257273144'], ['40.69981', '-73.98589', '0.1658438682117232'], ['40.709274', '-74.00099', '0.1690533157161733'], ['40.71053', '-73.96145', '0.4473193030299643'], ['40.711282', '-73.968386', '0.2248812717854197'], ['40.711644', '-74.004109', '0.1690533157161733'], ['40.714573', '-73.99495', '0.010079638453270593'], ['40.7156', '-73.99475', '0.19840134794971007'], ['40.73883', '-73.977165', '0.0'], ['40.751038', '-73.94082', '0.3382137628111274']], [['0.0', '0.0', '0.0'], ['40.699768', '-73.98582', '0.26425296854694647'], ['40.69981', '-73.98589', '0.13929184578975365'], ['40.709274', '-74.00099', '0.11035445537811979'], ['40.71053', '-73.96145', '0.3242753933774744'], ['40.711282', '-73.968386', '0.1596120608989531'], ['40.711644', '-74.004109', '0.11035445537811979'], ['40.714573', '-73.99495', '0.007601009314351579'], ['40.7156', '-73.99475', '0.16253703246994478'], ['40.73883', '-73.977165', '0.0'], ['40.751038', '-73.94082', '0.25014797046820975']], [['0.0', '0.0', '0.0'], ['40.699768', '-73.98582', '0.1955832113225964'], ['40.69981', '-73.98589', '0.1296952772420698'], ['40.709274', '-74.00099', '0.07766401251529313'], ['40.71053', '-73.96145', '0.24064584350089474'], ['40.711282', '-73.968386', '0.08623980338841246'], ['40.711644', '-74.004109', '0.07766401251529313'], ['40.714573', '-73.99495', '0.005653164145111437'], ['40.7156', '-73.99475', '0.14341142020497805'], ['40.73883', '-73.977165', '0.0'], ['40.751038', '-73.94082', '0.1763461851309582']], [['0.0', '0.0', '0.0'], ['40.699768', '-73.98582', '0.17809754758418742'], ['40.69981', '-73.98589', '0.1486653902466494'], ['40.709274', '-74.00099', '0.09283368287760675'], ['40.71053', '-73.96145', '0.21865849194729137'], ['40.711282', '-73.968386', '0.057500332756555306'], ['40.711644', '-74.004109', '0.09283368287760675'], ['40.714573', '-73.99495', '0.006382686676427526'], ['40.7156', '-73.99475', '0.1534998909691287'], ['40.73883', '-73.977165', '0.0'], ['40.751038', '-73.94082', '0.16708226573938506']]],
                {heatmapOptions: {
                        radius: 50,
                        minOpacity: 0.15,
                        maxOpacity: 1,
                        scaleRadius: false,
                        useLocalExtrema: false,
                        defaultWeight: 1,
                        gradient: {0.55: 'blue', 0.9: 'lime', 0.1: 'red'}
                    }
                })
                .addTo(map_df3c5569c4e4430c9df2a3da99c1fedb);

        
</script>